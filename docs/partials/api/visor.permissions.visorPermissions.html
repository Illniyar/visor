<h1><code ng:non-bindable="">visorPermissions</code>
<div><span class="hint">service in module <code ng:non-bindable="">visor.permissions</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="visor-permissions-visorpermissions-page"><p><code>visorPermissions</code> checks for permissions and notifies when a routes that isn&#39;t allowed is requested.</p>
<p>In order to work, routing module plugins (such as the provided <a href="#/api/visor.ngRoute">visor.ngRoute</a> and
<a href="#/api/visor.ui-router">visor.ui-router</a> must configure <code>visorPermissions</code> and call
<a href="#/api/visor.permissions.visorPermissions#onroutechange">onRouteChange</a> when a route has changed.</p>
</div></div>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><h3 id="methods_checkpermissionsforroute">checkPermissionsForRoute(routeId)</h3>
<div class="checkpermissionsforroute"><div class="visor-permissions-visorpermissions-checkpermissionsforroute-page"><p>A function to check if a route is currently allowed or restricted</p>
<p>Heavily uses caching</p>
</div><h5 id="methods_checkpermissionsforroute_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>routeId</td><td><a href="" class="label type-hint type-hint-object">*</a></td><td><div class="visor-permissions-visorpermissions-checkpermissionsforroute-page"><p>an identifier for a route (depending on the routing module, could be a string,
regex or some kind of object)</p>
</div></td></tr></tbody></table><h5 id="methods_checkpermissionsforroute_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-boolean">Boolean|undefined</a></td><td><div class="visor-permissions-visorpermissions-checkpermissionsforroute-page"><p>true if route is allowed</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_clearpermissioncache">clearPermissionCache()</h3>
<div class="clearpermissioncache"><div class="visor-permissions-visorpermissions-clearpermissioncache-page"><p>Clears the cache used by checkPermissionsForRoute - should be called when
the permission context changes (I.E. after authentication)</p>
</div></div>
</li>
<li><h3 id="methods_notifyoncacheclear">notifyOnCacheClear(handler)</h3>
<div class="notifyoncacheclear"><div class="visor-permissions-visorpermissions-notifyoncacheclear-page"><p>Notify handler when the permission cache used by checkPermissionsForRoute is cleared</p>
</div><h5 id="methods_notifyoncacheclear_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>handler</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="visor-permissions-visorpermissions-notifyoncacheclear-page"><p>the handler function to call</p>
</div></td></tr></tbody></table><h5 id="methods_notifyoncacheclear_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="visor-permissions-visorpermissions-notifyoncacheclear-page"><p>a dereigster function</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_onroutechange">onRouteChange(next, delayChange)</h3>
<div class="onroutechange"><div class="visor-permissions-visorpermissions-onroutechange-page"><div class="alert alert-info">
NOTE: should only be called by routing module plugins
</div>

<p>A function to be called when a route changes, triggers the route permission checks.</p>
</div><h5 id="methods_onroutechange_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>next</td><td><a href="" class="label type-hint type-hint-object">*</a></td><td><div class="visor-permissions-visorpermissions-onroutechange-page"><p>route object to be sent to <code>permission functions</code>.</p>
</div></td></tr><tr><td>delayChange</td><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="visor-permissions-visorpermissions-onroutechange-page"><p>a function to be called if visorPermissions requires that the route
change be delayed. in such case the delayChange function will be called with a promise that will be
resolved or rejected depending on whether the route is allowed.</p>
</div></td></tr></tbody></table><h5 id="methods_onroutechange_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-any">Any</a></td><td><div class="visor-permissions-visorpermissions-onroutechange-page"><p>true if next is allowed, false if not allowed. a string containing &quot;delayed&quot; if
the check is delayed.</p>
</div></td></tr></table></div>
</li>
</ul>
</div>
<div class="member property"><h2 id="properties">Properties</h2>
<ul class="properties"><li><h3 id="properties_getpermissionsfromnext">getPermissionsFromNext</h3>
<div class="getpermissionsfromnext"><div class="visor-permissions-visorpermissions-getpermissionsfromnext-page"><p>runtime configuration for <a href="#/api/visor.permissions.visorPermissionsProvider#getpermissionsfromnext">getPermissionsFromNext</a>.</p>
</div></div>
</li>
<li><h3 id="properties_getroute">getRoute</h3>
<div class="getroute"><div class="visor-permissions-visorpermissions-getroute-page"><p>runtime configuration for <a href="#/api/visor.permissions.visorPermissionsProvider#getroute">getRoute</a>.</p>
</div></div>
</li>
<li><h3 id="properties_invokeparameters">invokeParameters</h3>
<div class="invokeparameters"><div class="visor-permissions-visorpermissions-invokeparameters-page"><p>runtime configuration for <a href="#/api/visor.permissions.invokeParameters#getpermissionsfromnext">getPermissionsFromNext</a>.</p>
</div></div>
</li>
</ul>
</div>
</div>
